(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1474],{22006:function(e,t,n){Promise.resolve().then(n.bind(n,65997))},65997:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(57437),r=n(2265),o=n(99376),l=n(30166),i=n(21837),s=n(83464),c=n(59628),u=n(91912),d=e=>{let{children:t}=e;return(0,a.jsx)("div",{style:{borderRadius:"16px",boxShadow:"0 4px 6px rgba(0.1, 0.1, 0.1, 0.1), 0 1px 3px rgba(0, 0, 0, 0.06)",overflow:"hidden",background:"#070D0A",padding:"1.5rem",margin:"15rem",marginTop:"-1rem"},children:t})};let f=(0,l.default)(()=>Promise.all([n.e(9562),n.e(1369)]).then(n.bind(n,81369)),{loadableGenerated:{webpack:()=>[81369]},ssr:!1}),p={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#C9F2DF",toolbar:{show:!1},height:500,dropShadow:{enabled:!0,top:2,left:2,blur:3,right:4,opacity:.3}},colors:["#03A678"],plotOptions:{bar:{horizontal:!0,barHeight:"60%",columnWidth:"45%",borderRadius:[10],borderRadiusApplication:"end",borderRadiusWhenStacked:"all",distributed:!0,padding:{left:200}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:["#48D97A"],inverseColors:!1,opacityFrom:6,opacityTo:.7,stops:[0,100]}},stroke:{show:!1,width:10,lineCap:"butt",colors:["transparent"]},dataLabels:{enabled:!1},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,yaxis:{lines:{show:!0}}},yaxis:{categories:[],labels:{borderColor:"#48D97A",show:!0,align:"left",style:{fontSize:"14px",fontWeight:800,color:"#48D97A"}},axisBorder:{show:!0,color:"#48D97A",width:1}},xaxis:{borderColor:"#48D97A",tickAmount:4,forceNiceScale:!1,labels:{formatter:e=>"".concat(Math.floor(e),"%"),style:{fontSize:"12px",fontWeight:400}},axisBorder:{show:!0,color:"#48D97A",height:10}},tooltip:{theme:"dark",fillSeriesColor:!1,y:{formatter:e=>"".concat(Math.round(e),"%")}},series:[{name:"Example",data:[20,50,80]}]},m=[{name:"Average Score",data:[]}];var h=(0,i.Z)(()=>{let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[i,h]=(0,r.useState)({}),[g,b]=(0,r.useState)([]),[y,x]=(0,r.useState)(p),[v,j]=(0,r.useState)(m),[w,S]=(0,r.useState)(!1),[k,O]=(0,r.useState)(0),[_,C]=(0,r.useState)(0),E=(0,o.useSearchParams)(),P=parseInt((null==E?void 0:E.get("subject_id"))||"0"),N=JSON.parse(localStorage.getItem("authtoken")).user,A=JSON.parse(localStorage.getItem("authtoken")).access_token;(0,r.useEffect)(()=>{h(N)},[]),(0,r.useEffect)(()=>{var e;(null===(e=y.xaxis.categories)||void 0===e?void 0:e.length)>0&&R(P)},[P,y.xaxis.categories]),(0,r.useEffect)(()=>{let e=async()=>{try{let e=await T(P);t(e),x(t=>({...t,xaxis:{categories:e.map(e=>e.unit_name)}}))}catch(e){console.error("Error loading units and scores:",e)}};P&&e()},[P]),(0,r.useEffect)(()=>{g.length>0&&x(e=>({...e,xaxis:{...e.xaxis,min:0,max:100}}))},[g]);let D=e=>"number"==typeof e[0]?e.slice(-3):e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,3),R=async t=>{try{await s.Z.get("".concat(c.C,"/exam/get_exam_score/").concat(N.id,"/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)}}).then(n=>{let a=n.data.map(e=>{if(e.subject_id===t&&e.student_id===N.id)return e}),r=e.map(e=>{let t=[];return a.map(n=>{e.unit_id==n.unit_id&&t.push(n.score)}),t}),o=null==r?void 0:r.map(e=>{if(!((null==e?void 0:e.length)>0))return 0;{let t=D(e);return t.reduce((e,t)=>e+t,0)/t.length||0}});b(o);let l=o.reduce((e,t,n,a)=>0!==t&&t<a[e]?n:e,0);C(l);let i=o.reduce((e,t,n,a)=>0!==t&&t>a[e]?n:e,0);O(i),j(e=>[{...e[0],data:o}])})}catch(e){console.error("Error fetching exam scores:",e)}},M=()=>{let e=localStorage.getItem("authtoken");return e?JSON.parse(e):null},T=async e=>{let t=M();if(!t)throw Error("No authentication token found");let n=t.access_token;try{return(await s.Z.get("".concat(c.C,"/grade-retrieval/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})).data}catch(e){throw console.error("Error fetching units:",e),e}};return(0,a.jsxs)("div",{className:"min-h-screen flex w-full justify-center flex-col bg-background",children:[(0,a.jsx)(u.Z,{open:w,onCancel:()=>S(!1),footer:null,children:(0,a.jsx)("div",{className:"tutorial-overlay rounded-md p-5",children:(0,a.jsxs)("div",{className:"tutorial-content space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl text-center",children:"Units Performance Dashboard"}),(0,a.jsx)("iframe",{className:"w-full h-[315px]",src:"https://www.youtube.com/embed/2P2_rmJc-bE",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{id:"help",className:"py-2 px-4 dark:bg-blue-700 dark:text-white",onClick:()=>S(!1),children:"Got It!"})})]})})}),(0,a.jsx)("div",{className:"flex justify-center items-center ",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-center mb-2 mt-10",style:{color:"#03A678"},children:"Units Performance Dashboard"})}),(0,a.jsx)("div",{className:"w-full space-y-6",children:(0,a.jsx)("div",{className:"rounded-md  dark:bg-darkgray p-6",children:(0,a.jsx)(d,{children:v[0].data.length>0&&(0,a.jsx)(f,{options:y,series:v,type:"bar",height:500,width:"100%"})})})})]})})},21837:function(e,t,n){"use strict";var a=n(57437),r=n(2265),o=n(76934),l=n(99376),i=n(35801);let s=e=>e.displayName||e.name||"Component";t.Z=e=>{let t=t=>{let[n,s]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),d=(0,l.useRouter)(),[f,p]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{(()=>{let e=localStorage.getItem("authtoken");if(e)try{let t=JSON.parse(e);s(t.user)}catch(e){console.error("Error parsing token:",e),s(null)}else s(null);u(!1)})()},[]),(0,r.useEffect)(()=>{c||n||(console.log("You must Log in"),d.push("/auth/login"))},[n,c,d]),c)?(0,a.jsx)("div",{className:"loader-overlay",children:(0,a.jsx)(i.Z,{size:5,color:"#ffffff"})}):n?(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Z,{onLoginClick:()=>p(!0)}),(0,a.jsx)("div",{className:"pt-16",children:(0,a.jsx)(e,{...t,user:n,setUser:s})})]}):null};return t.displayName="WithAuth(".concat(s(e),")"),t}},30166:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var a=n(55775),r=n.n(a)},55775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=n(60917);n(57437),n(2265);let r=a._(n(15602));function o(e,t){var n;let a={loading:e=>{let{error:t,isLoading:n,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let o={...a,...t};return(0,r.default)({...o,modules:null==(n=o.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=n(18993);function r(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return n}},15602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=n(57437),r=n(2265),o=n(81523),l=n(70049);function i(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...s,...e},n=(0,r.lazy)(()=>t.loader().then(i)),c=t.loading;function u(e){let i=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,s=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(l.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(n,{...e})]}):(0,a.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(n,{...e})});return(0,a.jsx)(r.Suspense,{fallback:i,children:s})}return u.displayName="LoadableComponent",u}},70049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return o}});let a=n(57437),r=n(20544);function o(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,r.getExpectedRequestStore)("next/dynamic css"),o=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));o.push(...t)}}return 0===o.length?null:(0,a.jsx)(a.Fragment,{children:o.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},35801:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(2265),r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function o(e){if("number"==typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var a=(e.match(/[^0-9]*$/)||"").toString();return r[a]?{value:t,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function l(e){var t=o(e);return"".concat(t.value).concat(t.unit)}var i=function(e,t,n){var a="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return a;var r=document.createElement("style");document.head.appendChild(r);var o=r.sheet,l="\n    @keyframes ".concat(a," {\n      ").concat(t,"\n    }\n  ");return o&&o.insertRule(l,0),a},s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},u=[i("PacmanLoader","0% {transform: rotate(0deg)} 50% {transform: rotate(-44deg)}","pacman-1"),i("PacmanLoader","0% {transform: rotate(0deg)} 50% {transform: rotate(44deg)}","pacman-2")],d=function(e){var t=e.loading,n=e.color,r=void 0===n?"#000000":n,d=e.speedMultiplier,f=void 0===d?1:d,p=e.cssOverride,m=e.size,h=void 0===m?25:m,g=e.margin,b=void 0===g?2:g,y=c(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),x=o(h),v=x.value,j=x.unit,w=s({display:"inherit",position:"relative",fontSize:0,height:"".concat(2*v).concat(j),width:"".concat(2*v).concat(j)},void 0===p?{}:p),S=i("PacmanLoader","75% {opacity: 0.7}\n    100% {transform: translate(".concat("".concat(-4*v).concat(j),", ").concat("".concat(-v/4).concat(j),")}"),"ball"),k=function(e){return{width:"".concat(v/3).concat(j),height:"".concat(v/3).concat(j),backgroundColor:r,margin:l(b),borderRadius:"100%",transform:"translate(0, ".concat("".concat(-v/4).concat(j),")"),position:"absolute",top:"".concat(v).concat(j),left:"".concat(4*v).concat(j),animation:"".concat(S," ").concat(1/f,"s ").concat(.25*e,"s infinite linear"),animationFillMode:"both"}},O="".concat(l(h)," solid transparent"),_="".concat(l(h)," solid ").concat(r),C=function(e){return{width:0,height:0,borderRight:O,borderTop:0===e?O:_,borderLeft:_,borderBottom:0===e?_:O,borderRadius:l(h),position:"absolute",animation:"".concat(u[e]," ").concat(.8/f,"s infinite ease-in-out"),animationFillMode:"both"}},E=C(0),P=C(1);return void 0===t||t?a.createElement("span",s({style:w},y),a.createElement("span",{style:E}),a.createElement("span",{style:P}),a.createElement("span",{style:k(2)}),a.createElement("span",{style:k(3)}),a.createElement("span",{style:k(4)}),a.createElement("span",{style:k(5)})):null}}},function(e){e.O(0,[5501,3301,4998,9485,6934,2971,2117,1744],function(){return e(e.s=22006)}),_N_E=e.O()}]);