(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{84930:function(e,t,a){Promise.resolve().then(a.bind(a,2486))},2486:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var l=a(57437),s=a(2265),n=a(21837),r=a(83464),o=a(59628),c=a(95007),i=a(30166),d=a(13959),u=a(70287),h=a(37628),m=a(70774),x=a(39500),f=a(91691),g=a(25119),p=a(32417),j=a(4877),b=a(57943),y=a(12789),w=a(36360);let v=(e,t)=>new w.C(e).setAlpha(t).toRgbString(),S=(e,t)=>new w.C(e).lighten(t).toHexString(),k=e=>{let t=(0,b.R_)(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},N=(e,t)=>{let a=e||"#000",l=t||"#fff";return{colorBgBase:a,colorTextBase:l,colorText:v(l,.85),colorTextSecondary:v(l,.65),colorTextTertiary:v(l,.45),colorTextQuaternary:v(l,.25),colorFill:v(l,.18),colorFillSecondary:v(l,.12),colorFillTertiary:v(l,.08),colorFillQuaternary:v(l,.04),colorBgElevated:S(a,12),colorBgContainer:S(a,8),colorBgLayout:S(a,0),colorBgSpotlight:S(a,26),colorBgBlur:v(l,.04),colorBorder:S(a,26),colorBorderSecondary:S(a,19)}};var _={defaultConfig:g.u_,defaultSeed:g.u_.token,useToken:function(){let[e,t,a]=(0,f.ZP)();return{theme:e,token:t,hashId:a}},defaultAlgorithm:h.Z,darkAlgorithm:(e,t)=>{let a=Object.keys(m.M).map(t=>{let a=(0,b.R_)(e[t],{theme:"dark"});return Array(10).fill(1).reduce((e,l,s)=>(e["".concat(t,"-").concat(s+1)]=a[s],e["".concat(t).concat(s+1)]=a[s],e),{})}).reduce((e,t)=>e=Object.assign(Object.assign({},e),t),{});return Object.assign(Object.assign(Object.assign({},null!=t?t:(0,h.Z)(e)),a),(0,y.Z)(e,{generateColorPalettes:k,generateNeutralColorPalettes:N}))},compactAlgorithm:(e,t)=>{let a=null!=t?t:(0,h.Z)(e),l=a.fontSizeSM,s=a.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),function(e){let{sizeUnit:t,sizeStep:a}=e,l=a-2;return{sizeXXL:t*(l+10),sizeXL:t*(l+6),sizeLG:t*(l+2),sizeMD:t*(l+2),sizeMS:t*(l+1),size:t*l,sizeSM:t*l,sizeXS:t*(l-1),sizeXXS:t*(l-1)}}(null!=t?t:e)),(0,j.Z)(l)),{controlHeight:s}),(0,p.Z)(Object.assign(Object.assign({},a),{controlHeight:s})))},getDesignToken:e=>{let t=(null==e?void 0:e.algorithm)?(0,u.jG)(e.algorithm):(0,u.jG)(h.Z),a=Object.assign(Object.assign({},m.Z),null==e?void 0:e.token);return(0,u.t2)(a,{override:null==e?void 0:e.token},t,x.Z)}};let C=(0,i.default)(()=>Promise.all([a.e(9562),a.e(1369)]).then(a.bind(a,81369)),{loadableGenerated:{webpack:()=>[81369]},ssr:!1});var O=e=>{let{student:t,subject:a,className:n}=e,[i,u]=(0,s.useState)({chart:{type:"line",height:850,background:"#334155",foreColor:"#fff",animations:{enabled:!0},padding:{left:100,right:100,top:100,bottom:100}},borderRadius:12,stroke:{curve:"smooth"},xaxis:{categories:["Aug","Sep","Oct","Nov","Dec","Jan 2024","Feb","Mar","Apr","May","Jun"],title:{text:"Month"}},yaxis:{title:{text:"Progress Score"},min:0,max:100,labels:{formatter:e=>"".concat(Math.round(e),"%")}},margin:{left:100,right:100,top:100,bottom:100}}),h=JSON.parse(localStorage.getItem("authtoken")).access_token,[m,x]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[p,j]=(0,s.useState)([]),[b,y]=(0,s.useState)(null),[w,v]=(0,s.useState)([]),[S,k]=(0,s.useState)([]),[N,O]=(0,s.useState)([]);(0,s.useEffect)(()=>{n&&a&&Z(n,a)},[n,a]),(0,s.useEffect)(()=>{t&&a&&T()},[t,a]),(0,s.useEffect)(()=>{a&&(A(a),O([]))},[a]),(0,s.useEffect)(()=>{if(f&&a&&m||t||n){let e=[],t=Array(11).fill(0);m.map(e=>new Date(e.created_at).getTime()),f.forEach(a=>{let l={};m.forEach(e=>{if(e.unit_id===parseInt(a.unit_id)){let t=new Date(e.created_at).getMonth()-7;t<0&&(t+=12),l[t]||(l[t]=[]),l[t].push(e.score)}}),Object.entries(Object.entries(l).map(e=>{let[t,a]=e;return{week:parseInt(t),average:a.reduce((e,t)=>e+t,0)/a.length,numberOfScores:a.length}})).forEach(e=>{let[a,l]=e;t[l.week]=l.average}),e.push({name:"Unit ".concat(a.unit_id,": ").concat(a.unit_name),data:[...t],borderColor:"rgba(".concat(255*Math.random(),", ").concat(255*Math.random(),", ").concat(255*Math.random(),", 1)")}),t=Array(11).fill(0)}),v(e.map(()=>!0)),y(e)}},[f,t,a,m]),(0,s.useEffect)(()=>{if(b&&N){let e=b.filter(e=>{let t=e.name.match(/Unit (\d+)/);return t&&N.includes(t[1])}).map(e=>({name:e.name,data:e.data}));console.log("Filtered chart data:",e),j(e)}},[b,N]),(0,s.useEffect)(()=>{let e=f.map(e=>({value:e.unit_id.toString(),label:e.unit_name}));k(e),f.length>0&&(null==f||f.map((t,a)=>{e[a]={value:t.unit_id.toString(),label:t.unit_name}})),k(e)},[f]);let T=async()=>{await r.Z.get("".concat(o.C,"/exam/get_exam_score/").concat(t,"/").concat(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}}).then(e=>{x(e.data)})},A=async e=>{await r.Z.get("".concat(o.C,"/grade-retrieval/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}}).then(e=>{g(e.data)})},Z=async(e,t)=>{await r.Z.get("".concat(o.C,"/exam/get_exam_score_by_class/").concat(e,"/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}}).then(e=>{x(e.data)})};return(0,s.useEffect)(()=>{console.log("Units updated:",f)},[f]),console.log("chartTemp:",b),console.log("Selected units:",N),console.log("Filtered chart data:",p),(0,l.jsxs)("div",{className:"flex justify-center items-center flex-col mt-5",children:[(0,l.jsx)("div",{className:"w-full",children:f.length>0&&(0,l.jsx)("div",{className:"rounded-md shadow-md dark:bg-slate-700 dark:text-white py-4 px-7 flex justify-center items-center ",children:(0,l.jsx)(d.ZP,{theme:{algorithm:_.darkAlgorithm,token:{colorBgContainer:"#334155",colorBgElevated:"#334155",colorBorder:"#fff",colorPrimary:"#fff",colorText:"rgb(255, 255, 255)",colorTextSecondary:"rgba(255, 255, 255, 0.45)",controlItemBgHover:"rgb(153, 200, 255)",controlItemBgActive:"#177ddc15",colorBgTextHover:"#000",controlOutline:"transparent",colorPrimaryHover:"#fff"}},children:(0,l.jsx)(c.Z,{value:N,onChange:e=>{console.log("Units selected:",e),O(e)},mode:"multiple",style:{width:"100%"},options:S,placeholder:"Select Unit",maxTagCount:"responsive",value:N,onChange:O})})})}),f.length>0&&(0,l.jsx)("div",{className:"w-full mt-10 p-5 bg-slate-700 rounded-md",children:(0,l.jsx)(C,{type:"line",height:400,series:p,options:i})})]})};a(45867);var T=a(85180),A=a(91912),Z=(0,n.Z)(()=>{let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(0),[c,i]=(0,s.useState)([]),[d,u]=(0,s.useState)(0),[h,m]=(0,s.useState)([]),[x,f]=(0,s.useState)(0),[g,p]=(0,s.useState)([]),[j,b]=(0,s.useState)(-1),[y,w]=(0,s.useState)([]),v=JSON.parse(localStorage.getItem("authtoken")).access_token,[S,k]=(0,s.useState)(!1),[N,_]=(0,s.useState)(0),[C,Z]=(0,s.useState)("");(0,s.useEffect)(()=>{E(),B()},[]),(0,s.useEffect)(()=>{0!==d&&P()},[d]),(0,s.useEffect)(()=>{0!==x&&(M(),z())},[x]);let B=async()=>{await r.Z.get("".concat(o.C,"/users/get_students"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}}).then(async e=>{t(e.data)})},E=async()=>{await r.Z.get("".concat(o.C,"/grade-retrieval/get_all_subject"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}}).then(async e=>{i(e.data)})},P=async()=>{await r.Z.get("".concat(o.C,"/grade-retrieval/").concat(d),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}}).then(async e=>{m(e.data)})},M=async()=>{await r.Z.get("".concat(o.C,"/mongo_flashcards/get_incorrectlist"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},params:{subjectId:d,unitId:x,userId:a}}).then(async e=>{p(e.data)})},z=async()=>{await r.Z.get("".concat(o.C,"/recall/get_recall_answers"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},params:{subjectId:d,unitId:x,userId:a}}).then(async e=>{w(e.data.slice(-3))})},I=async e=>{u(e.target.value)},F=async e=>{_(parseInt(e.target.value))},R=async e=>{n(e.target.value)},L=async e=>{f(e.target.value)},D=e=>{b(e)},U=async e=>{Z(e.target.value)};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-center items-center mb-10 gap-2",children:[(0,l.jsx)("h1",{className:"text-center text-3xl font-bold dark:text-white",children:"Teacher Dashboard"}),(0,l.jsx)("button",{className:"px-[10px] py-[3px] dark:bg-blue-700 dark:text-white rounded-full",onClick:()=>k(!0),children:"?"})]}),(0,l.jsxs)("div",{className:"flex justify-center gap-2 flex-row max-[650px]:flex-wrap dark:text-white dark:bg-slate-700 rounded-md shadow-sm px-7",children:[(0,l.jsx)("div",{className:"py-4 flex justify-center items-center w-full",children:(0,l.jsxs)("select",{className:"bg-white border border-slate-300 rounded-md shadow-sm text-gray-900 sm:text-sm dark:bg-slate-700 dark:text-white w-full max-[700px]:text-sm max-[840px]:w-[80vw]",onChange:F,defaultValue:"",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select Filter Mode"}),(0,l.jsx)("option",{value:0,children:"Class"}),(0,l.jsx)("option",{value:1,children:"Individual Student"})]})}),(0,l.jsx)("div",{className:"py-4 flex justify-center items-center w-full",children:1===N?(0,l.jsxs)("select",{className:"bg-white border border-slate-300 rounded-md shadow-sm text-gray-900 sm:text-sm dark:bg-slate-700 dark:text-white w-full max-[700px]:text-sm max-[840px]:w-[80vw]",onChange:R,defaultValue:"",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select a student"}),e&&(null==e?void 0:e.map((e,t)=>(0,l.jsx)("option",{value:e.id,children:e.firstName+" "+e.lastName},"student"+t)))]}):0===N&&(0,l.jsxs)("select",{className:"bg-white border border-slate-300 rounded-md shadow-sm text-gray-900 sm:text-sm dark:bg-slate-700 dark:text-white w-full max-[700px]:text-sm max-[840px]:w-[80vw]",onChange:U,defaultValue:"",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select a class"}),(0,l.jsx)("option",{value:"CompSci1",children:"CompSci1"}),(0,l.jsx)("option",{value:"PE2",children:"PE2"})]})}),(0,l.jsx)("div",{className:"py-4 flex justify-center items-center w-full",children:(0,l.jsxs)("select",{className:"bg-white border border-slate-300 rounded-md shadow-sm text-gray-900 sm:text-sm dark:bg-slate-700 dark:text-white w-full max-[700px]:text-sm max-[840px]:w-[80vw]",onChange:I,defaultValue:"",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select a subject"}),c&&c.map((e,t)=>(0,l.jsx)("option",{value:e.subject_id,children:e.subject_name},"subject"+t))]})})]}),(0,l.jsx)(O,{student:a,subject:d,className:C}),h.length>0&&1===N&&(0,l.jsxs)("div",{className:"w-full mt-10 p-5 bg-slate-700 rounded-md",children:[(0,l.jsx)("h1",{className:"text-xl font-bold mb-6 dark:text-white mt-3",children:"View Incorrect Words"}),(0,l.jsxs)("select",{className:"bg-white border border-slate-300 rounded-md shadow-sm text-gray-900 sm:text-sm dark:bg-slate-700 dark:text-white w-full max-[700px]:text-sm max-[840px]:w-[80vw]",onChange:L,defaultValue:"",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select Unit"}),h.length>0&&h.map((e,t)=>(0,l.jsx)("option",{value:e.unit_id,children:e.unit_name},"unit"+t))]}),(0,l.jsxs)("table",{className:"mt-5 w-full border-collapse",children:[(0,l.jsx)("thead",{className:"dark:text-white",children:(0,l.jsxs)("tr",{className:"",children:[(0,l.jsx)("th",{children:"No."}),(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Time"}),(0,l.jsx)("th",{children:"Action"})]})}),(0,l.jsx)("tbody",{className:"dark:text-white",children:g.length>0?g.map((e,t)=>(0,l.jsxs)("tr",{className:t%2==0?"bg-slate-700":"bg-slate-600",children:[(0,l.jsx)("td",{className:t%2==0?"bg-slate-700":"bg-slate-600 max-[650px]:text-sm",children:t+1}),(0,l.jsx)("td",{className:t%2==0?"bg-slate-700":"bg-slate-600 max-[650px]:text-sm",children:e.createdAt.split("T")[0]}),(0,l.jsx)("td",{className:t%2==0?"bg-slate-700":"bg-slate-600 max-[650px]:text-sm",children:e.createdAt.split("T")[1].split(".")[0]}),(0,l.jsx)("td",{className:t%2==0?"bg-slate-700":"bg-slate-600 max-[650px]:text-sm",children:(0,l.jsx)("button",{className:"hover:underline",onClick:()=>b(t),children:"View"})})]},"flashcard"+t)):(0,l.jsx)("tr",{className:"bg-slate-700",children:(0,l.jsx)("td",{colSpan:4,className:"text-center dark:text-white dark:bg-slate-700",children:(0,l.jsx)(T.Z,{})})})})]}),y.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-xl font-bold mb-6 dark:text-white mt-3",children:"Active Recall Feedback"}),y.map((e,t)=>{var a,s;return(0,l.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,l.jsxs)("h1",{className:"text-white",children:["- ",(null===(a=e.createdAt)||void 0===a?void 0:a.split("T")[0])+" "+(null===(s=e.createdAt)||void 0===s?void 0:s.split("T")[1].split(".")[0])]}),(0,l.jsxs)("p",{className:"text-white ml-2",children:["Answer: ",e.answer]}),(0,l.jsxs)("p",{className:"text-white ml-2",children:["Feedback: ",e.feedback]})]},"feedback"+t)})]})]}),(0,l.jsx)(A.Z,{title:(0,l.jsx)("span",{className:"text-white text-xl",children:"Incorrect Words"}),open:-1!==j,onCancel:()=>D(-1),footer:null,styles:{header:{background:"rgb(51, 65, 85)",color:"white"},content:{background:"rgb(51, 65, 85)",color:"white"}},children:g.length>0?(0,l.jsx)("ul",{children:-1!==j&&g[j].terms.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("li",{className:"text-md font-bold list-disc list-inside space-y-2 text-white",children:e.term}),(0,l.jsx)("li",{className:"text-md ml-3 text-white",children:e.definition})]},"flash"+t))}):(0,l.jsx)("p",{children:"No incorrect words yet."})}),(0,l.jsx)(A.Z,{open:S,onCancel:()=>k(!1),footer:null,children:(0,l.jsx)("div",{className:"tutorial-overlay rounded-md p-5",children:(0,l.jsxs)("div",{className:"tutorial-content space-y-2",children:[(0,l.jsx)("h2",{className:"text-xl text-center",children:"Teacher Dashboard"}),(0,l.jsx)("iframe",{className:"w-full h-[315px]",src:"https://www.youtube.com/embed/CFg79SuttyQ",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{id:"help",className:"py-2 px-4 dark:bg-blue-700 dark:text-white",onClick:()=>k(!1),children:"Got It!"})})]})})})]})})},21837:function(e,t,a){"use strict";var l=a(57437),s=a(2265),n=a(76934),r=a(99376),o=a(35801);let c=e=>e.displayName||e.name||"Component";t.Z=e=>{let t=t=>{let[a,c]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),u=(0,r.useRouter)(),[h,m]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{(()=>{let e=localStorage.getItem("authtoken");if(e)try{let t=JSON.parse(e);c(t.user)}catch(e){console.error("Error parsing token:",e),c(null)}else c(null);d(!1)})()},[]),(0,s.useEffect)(()=>{i||a||(console.log("You must Log in"),u.push("/auth/login"))},[a,i,u]),i)?(0,l.jsx)("div",{className:"loader-overlay",children:(0,l.jsx)(o.Z,{size:5,color:"#ffffff"})}):a?(0,l.jsxs)("div",{children:[(0,l.jsx)(n.Z,{onLoginClick:()=>m(!0)}),(0,l.jsx)("div",{className:"pt-16",children:(0,l.jsx)(e,{...t,user:a,setUser:c})})]}):null};return t.displayName="WithAuth(".concat(c(e),")"),t}},30166:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var l=a(55775),s=a.n(l)},55775:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let l=a(60917);a(57437),a(2265);let s=l._(a(15602));function n(e,t){var a;let l={loading:e=>{let{error:t,isLoading:a,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e);let n={...l,...t};return(0,s.default)({...n,modules:null==(a=n.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let l=a(18993);function s(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return a}},15602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let l=a(57437),s=a(2265),n=a(81523),r=a(70049);function o(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},i=function(e){let t={...c,...e},a=(0,s.lazy)(()=>t.loader().then(o)),i=t.loading;function d(e){let o=i?(0,l.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,c=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(r.PreloadCss,{moduleIds:t.modules}):null,(0,l.jsx)(a,{...e})]}):(0,l.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(s.Suspense,{fallback:o,children:c})}return d.displayName="LoadableComponent",d}},70049:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let l=a(57437),s=a(20544);function n(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,s.getExpectedRequestStore)("next/dynamic css"),n=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,l.jsx)(l.Fragment,{children:n.map(e=>(0,l.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},45867:function(){}},function(e){e.O(0,[9283,5501,3301,4998,9485,1021,5007,6934,2971,2117,1744],function(){return e(e.s=84930)}),_N_E=e.O()}]);